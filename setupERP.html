<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> How to setup ERPNExt in Ubuntu via VM </title>

    <link rel="stylesheet" href="blogs.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=League+Spartan:wght@100..900&display=swap" rel="stylesheet">

</head>
<body>
    <a href="index.html" class="back-link">
        <i class="fas fa-arrow-left"></i> 
      </a>

      <button id="darkToggle" aria-label="Toggle dark mode">
        <i class="fas fa-moon"></i>
      </button>
    
      <div class="container">
        <h1> How to setup ERPNext in Ubuntu via VM </h1>

        <p> 6/4/2025 </p> <p id="reading-time"></p>

        <span> 📅 May 4, 2025 </span>
    
        <p>
          ERPNext is a powerful open-source ERP platform, but installing it directly on your main computer can sometimes feel daunting or risky. Especially if one is not familiar with Linux distro (Ubuntu, here), and unfortunately, ERPNext only works on Ubuntu. Using a virtual machine lets you keep your host system clean while giving ERPNext its own dedicated environment to run and grow.
      </p>
  
      <p>
          In this guide, we will walk through the step-by-step process of creating an Ubuntu VM, installing all the prerequisites, and setting up ERPNext so you can start managing your business operations.
      </p>

      <div style="display: flex; align-items: flex-start; background-color: #f9f9f9; border-left: 4px solid #ffc107; padding: 1rem; border-radius: 5px; max-width: 700px; margin: 1rem 0;">
        <i class="fas fa-info-circle" style="color: #ffc107; font-size: 1.2rem; margin-right: 0.75rem; margin-top: 2px;"></i>
        <p style="margin: 0; color: #333;">
          <strong>Note:</strong> Bugs or issues you might encounter during the process are listed at the end of this guide.  I do this to prevent disrupting the flow of the guide if I keep randomly mentioning them in between, and so this guide will assume that (ideally) you have a smooth installation process.
        </p>
      </div>
  
      <p>
          First, we need a virtual machine, and we'll be using <strong>Oracle VirtualBox</strong>.  
          Download it here: <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener noreferrer">https://www.virtualbox.org/wiki/Downloads</a><br />
          Pick the installer for Windows (assuming most readers here are Windows users). The installation process is straightforward and follows the usual steps.
      </p>

      <div style="display: flex; justify-content: center; margin: 2rem 0;">
        <img src="./assets/ubuntu22.png" alt="Ubuntu 22 LTS" style="width: 600px; height: 200px;" />
      </div>
      <p>
          Next, we select a Linux distribution -- <strong>Ubuntu</strong>. Other distros, and Ubuntu flavors might work, but ERPNext is best suited with Ubuntu. Here, I recommend <strong>Ubuntu 22 LTS</strong> because it is proven to be the most stable with ERPNext.
      </p>

      <p>
          Download Ubuntu 22 LTS here: <a href="https://releases.ubuntu.com/jammy/" target="_blank" rel="noopener noreferrer">https://releases.ubuntu.com/jammy/</a>
      </p>

      <hr>

      <h3>Creating Your Ubuntu Virtual Machine</h3>

      <p>
        Now that VirtualBox is installed and ready, let's create your Ubuntu virtual machine. Open VirtualBox and click <strong>New</strong> to start building your digital sandbox. Give your VM a name, like <code>Ubuntu_ERPNext</code>, set the type to <code>Linux</code>, and pick <code>Ubuntu 64-bit</code> as the version (the VM will do this automatically for you).
      </p>
      <div style="display: flex; justify-content: center; margin: 2rem 0;">
        <img src="./assets/ERPNext0.png" alt="" style="width: 600px; height: 200px; gap: 10px;" />
      </div>
      <div style="display: flex; justify-content: center; margin: 2rem 0;">
        <img src="./assets/ERPNext1.png" alt="" style="width: 600px; height: 400px; gap: 10px;" />
      </div>

      <div style="max-width: 700px; margin: 0 auto;">
        <img 
          src="./assets/ERPNext3.png" 
          alt="" 
          style="width: 300px; height: 200px; float: left; margin: 0 15px 15px 0;" 
        />
        <p>
          If your hostname is something like <code>Ubuntu_ERPNext</code>, change it simply to <code>Ubuntu</code> like here.
        </p>
        <div style="clear: both;"></div>
      </div>
      
      <p>
        Allocate at least <strong>4 GB of RAM (4096 MB)</strong>, assign <strong>2 CPU cores</strong>, and for the virtual hard disk, I’ll go with the default <strong>25 GB</strong>. Ubuntu isn’t as large as Windows, so you don’t need to worry about space here.
      </p>
      
      <div style="display: flex; justify-content: center; margin: 2rem 0;">
        <img src="./assets/ERPNext4.png" alt="" style="width: 600px; height: 200px;" />
      </div>
      
      <p>
        For the network adapter, choose <code>Bridged Adapter</code>. This allows your VM to connect through your host machine’s network, which will be necessary when fetching resources and dependencies for ERPNext.
      </p>

      <div style="display: flex; justify-content: center; margin: 2rem 0;">
        <img src="./assets/ERPNext6.png" alt="" style="width: 500px; height: 300px;" />
      </div>

      <div style="max-width: 700px; margin: 0 auto;">
        <img 
          src="./assets/ERPNext5.png" 
          alt="" 
          style="width: 400px; height: 200px; float: left; margin: 0 15px 15px 0;" 
        />
      <p>
        Don’t forget to prioritize the hard drive in the boot order settings.
      </p>
      <div style="clear: both;"></div>
      </div>
      <p>
        After creating the VM, click <strong>Start</strong> to boot it up. The VM should load the Ubuntu installer from the ISO you attached. If you see the GRUB menu, choose <strong>Install Ubuntu</strong> and proceed. If the VM boots directly into the Live Environment (a fully functional trial version running from the virtual USB), simply double-click the <strong>Install Ubuntu</strong> icon on the desktop to start the installation.
      </p>
      <div style="display: flex; justify-content: center; margin: 2rem 0;">
        <img src="./assets/ubuntuInstaller.jpeg" alt="" style="width: 500px; height: 300px;" />
      </div>
      <p>
        Follow the installer prompts to set your language, keyboard, timezone, and create your user account. When asked about installation type, select <strong>Erase disk and install Ubuntu</strong> — this affects only the VM’s virtual disk, so your main computer is safe.
      </p>
      <p>
        Once you start the installation, it will take about 10 minutes to complete. After it finishes, restart the VM and log into your fresh Ubuntu system.
      </p>

      <hr>

      <h3> Update Ubuntu and Install Prerequisites </h3>

      <p>
        Now that you have Ubuntu installed and running inside your VM, it’s important to make sure your system is up-to-date and ready for ERPNext.
      </p>
      <p>
        Open the Terminal by pressing <strong>Ctrl + Alt + T</strong>, then run these commands to update your package lists and upgrade installed software:
      </p>
      <div style="display: flex; justify-content: center; margin: 2rem 0; color: rgba(0, 0, 0, 0.5);">
        <i>
          <span style="margin-right: 0.5rem;">
            <i class="fas fa-circle" style="font-size: 0.6rem;"></i>
          </span>
          Here, if you find your terminal not opening, this is 
          <a href="https://www.youtube.com/watch?v=6lybGuvOd_U" target="_blank" rel="noopener noreferrer" style="text-decoration: underline;">
            the most random solution
          </a> 
          I found for it. You just need to change the language to something else from UK to US, vice versa.
        </i>
      </div>
      
      <pre class="code-block">
        sudo apt update && sudo apt upgrade -y
      </pre>
      <p>
        This command refreshes the package information and installs any available updates to keep your system secure and stable.
      </p>

      <p>Once your system is updated, install each required package one by one:</p>
      
   <pre class="code-block">   
sudo apt install -y curl
sudo apt install -y git
sudo apt install -y python3-dev
sudo apt install -y python3-pip
sudo apt install -y software-properties-common
sudo apt install -y xvfb libfontconfig wkhtmltopdf
</pre>

<p>Each of these tools plays a role in preparing your system:</p>
<ul style="color: rgba(0,0,0,0.8);">
  <li><strong>curl:</strong> Downloads files and interacts with APIs</li>
  <li><strong>git:</strong> Version control system to clone ERPNext source code</li>
  <li><strong>python3-dev:</strong> Python headers needed for compiling dependencies</li>
  <li><strong>python3-pip:</strong> Python package manager</li>
  <li><strong>software-properties-common:</strong> Adds useful utilities like <code>add-apt-repository</code></li>
  <li><strong>xvfb & libfontconfig:</strong> Virtual framebuffer and font configuration for rendering PDFs</li>
  <li><strong>wkhtmltopdf:</strong> Converts HTML to PDF for report generation in ERPNext</li>
</ul>

<p>Next, ERPNext requires a database to function, so we’ll install the MariaDB server along with its client tools and development libraries:</p>

<pre class="code-block">
sudo apt install -y mariadb-server
sudo apt install -y mariadb-client
sudo apt install -y libmysqlclient-dev
</pre>

<p>Here’s what each of these packages does:</p>
<ul style="color: rgba(0,0,0,0.8);">
  <li><strong>mariadb-server:</strong> The actual MariaDB database server used to store ERPNext data</li>
  <li><strong>mariadb-client:</strong> Command-line tools to interact with the MariaDB server</li>
  <li><strong>libmysqlclient-dev:</strong> Development libraries for MySQL-compatible clients, needed for building database integrations</li>
</ul>

<p>
  For caching, queuing, and in-memory data storage, ERPNext also requires the Redis server:
</p>

<pre class="code-block">
sudo apt install -y redis-server
</pre>
<p>
  First, download and run the setup script from NodeSource to add the Node.js 22 repository to your system’s <code>apt</code> sources. This prepares your system for installing Node.js and the <code>npm</code> package manager:
</p>

<pre class="code-block">
curl -fsSL https://deb.nodesource.com/setup-22.x | sudo -E bash -
</pre>

<p>
  Then, install Node.js and Yarn:
</p>

<pre class="code-block">
sudo apt install -y nodejs
sudo npm install -g yarn
</pre>

<p>Here's what each command does:</p>
<ul style="color: rgba(0,0,0,0.8);">
  <li><strong>setup-22.x script:</strong> Adds the Node.js 22 repository to <code>apt</code></li>
  <li><strong>nodejs:</strong> Installs Node.js runtime and <code>npm</code> package manager</li>
  <li><strong>yarn:</strong> Installs Yarn globally, a faster alternative to <code>npm</code> for managing JavaScript dependencies</li>
</ul>

<p> That's it for all the required dependencies. </p>
    
<h3>Setting up Frappe and ERPNext</h3>

<p>
  To install <code>frappe-bench</code>, it's important to first set up a Python virtual environment. On Debian/Ubuntu systems, Python enforces <a href="https://peps.python.org/pep-0668/" target="_blank" rel="noopener noreferrer">PEP 668 protections</a>, which may prevent package installations outside a virtual environment.
</p>

<p>
  We'll start by creating a development directory and setting up the virtual environment inside it:
</p>

<pre class="code-block">
# Create a directory named frappe-dev
mkdir frappe-dev

# Navigate into the directory
cd frappe-dev

# Create a virtual environment named 'venv'
python3 -m venv venv

# Activate the virtual environment
source venv/bin/activate
</pre>

<p>
  Once activated, you’ll see <code>(venv)</code> appear in your terminal prompt — indicating that the virtual environment is now active.
  You can deactivate the environment anytime by running deactivate.
</p>

<p>
  With this in place, you’re now ready to install <code>frappe-bench</code> and continue the setup.
</p>
<pre class="code-block">
pip install frappe-bench
</pre>

<p>
  Now, initialize the Frappe bench by running the following command:
</p>

<pre class="code-block">
bench init frappe-bench
</pre>

<p>
  This will create a new folder named <code>frappe-bench</code> with all the necessary files and configuration for your Frappe development environment.
</p>

<p>
  If you run into errors during initialization, it's likely that your system is missing some required build tools. Install them with:
</p>

<pre class="code-block">
sudo apt install -y pkg-config build-essential
</pre>

<p>
  These packages provide essential system utilities and compilers needed to build Python and Node.js dependencies during the bench setup process.
</p>

<p>Most importantly, you need to download the ERPNext application into your bench environment. Run the following command inside your <code>frappe-bench</code> directory:</p>

<pre class="code-block">
bench get-app erpnext https://github.com/frappe/erpnext
</pre>
<p>This command clones the ERPNext repository and makes it available for installation on your bench.</p>

<p>After downloading the ERPNext app, you are ready to create your ERPNext site:</p>

<pre class="code-block">
bench new-site erp.local
</pre>

<p>You can name the site whatever you prefer; here, <code>erp.local</code> is just an example.</p>

<p>When creating a new site, you will be prompted to set the MariaDB root password and the site’s Administrator password. However, at this point, these passwords may not yet be configured.</p>

<p>By default, MySQL on Ubuntu uses the <code>auth_socket</code> plugin for the root user. This means instead of authenticating with a password, MySQL verifies that the user running the command matches the MySQL root user via the Unix socket. For example, if you are logged in as <code>vboxuser</code>, you are not MySQL's root user and cannot log in as root using a password, because MySQL expects socket-based authentication instead.</p>

<p>
  Since MySQL on Ubuntu uses the <code>auth_socket</code> plugin by default, password-based login as root will fail—even if you're the admin.
  The recommended approach is to create a new MariaDB user with a password or change the root user to use password authentication.
</p>


<p>If not prompted automatically, you can manually set or change the password inside the MariaDB shell <code>(sudo mysql)</code> using:</p>

<pre class="code-block">
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'your_secure_password';
FLUSH PRIVILEGES;
</pre>
<p>This changes the root user to use password authentication instead of <code>auth_socket</code>. After this, you can log in with the root password you just set.</p>
<p>Earlier, we installed <code>redis-server</code>, but we haven’t enabled or started it yet. Let’s do that now:</p>

<pre class="code-block">
sudo systemctl start redis-server
sudo systemctl enable redis-server
</pre>

<p>Next, configure Redis for bench by running:</p>

<pre class="code-block">
bench setup redis
</pre>

<p>Finally, you can create your ERPNext site:</p>

<pre class="code-block">
bench new-site erp.local
</pre>

<p>
  After the site is created, Frappe will automatically set it up. Once done, you can access the site by visiting:
</p>

<ul>
  <li><code>http://127.0.0.1:8000</code> — if you're accessing it from the same machine</li>
  <li><code>http://192.168.100.73:8000</code> — — note that the last part of the IP, or host IP (e.g., <code>.73</code>) may vary depending on your device.</li>
</ul>

<p>
  On the login screen, use the default username <strong>Administrator</strong> and the <strong>Administrator password</strong> you set during <code>bench new-site</code> setup.
</p>

<p>
  And with that, your ERPNext system is up and running! You can now explore features like the Point of Sale (POS) system and begin configuring your workspace to suit your business needs.
</p>

<hr>

<div id="bugDiv" style="border-left: 4px solid #e74c3c; background-color: #fef3f2; padding: 1rem 1.5rem; margin-top: 3rem; border-radius: 8px;">
  <h3 style="color: #c0392b; margin-top: 0; display: flex; align-items: center;">
    <i class="fas fa-bug" style="margin-right: 0.5rem;"></i> Common Installation Issues
  </h3>

  <p><strong>1) “User is not in the sudoers file” error</strong></p>
  <p>
    If your username (e.g., <code>vboxuser</code>) isn't in the <code>sudo</code> group, you won't be able to run commands with <code>sudo</code>. To fix this, follow these steps to add yourself to the sudo group from a root shell:
  </p>

  <ol style="line-height: 1.6;">
    <li>Reboot your system and enter the <strong>GRUB menu</strong> by pressing <kbd>Esc</kbd> or <kbd>Shift</kbd> during boot.</li>
    <li>Select your Ubuntu entry and press <kbd>e</kbd> to edit it.</li>
    <li>Find the line that starts with <code>linux /boot/vmlinuz</code> and add <code>init=/bin/bash</code> to the end of that line.</li>
    <li>Press <kbd>Ctrl + X</kbd> or <kbd>F10</kbd> to boot into a root shell.</li>
    <li>Remount the filesystem as writable:
      <br><code>mount -o remount,rw /</code>
    </li>
    <li>Add your user to the <code>sudo</code> group:
      <br><code>usermod -aG sudo vboxuser</code>
    </li>
    <li>(Optional but recommended) Set a root password:
      <br><code>passwd</code>
    </li>
    <li>Finally, reboot the system normally:
      <br><code>exec /sbin/init</code>
    </li>
  </ol>

  <p><strong>After this, you should be able to use <code>sudo</code> normally with your user account.</strong></p>

  <hr>

  <p><strong>2) CSS Files Not Loading (404 Errors)</strong></p>
  </h3>

  <p>
    If your ERPNext login page or site loads without any styling — just plain HTML — and your browser console or terminal shows errors like:
  </p>

  <pre style="background-color: #fdf6e3; padding: 0.75rem 1rem; border-radius: 6px; overflow-x: auto;">
/assets/frappe/dist/css/login.bundle.620LYWTE.css - 404
/assets/frappe/dist/css/website.bundle.TTBWK5JW.css - 404
  </pre>

  <p>
    This happens because your site isn't running in production mode and the necessary CSS bundles haven’t been built yet.
  </p>

  <p><strong>To fix it:</strong></p>
  <ul style="line-height: 1.6;">
    <li>Run the following to build the required production files:
      <br><code>bench build --production</code>
    </li>
    <li>Then restart the bench:
      <br><code>bench start</code>
    </li>
  </ul>

  <p>
    <strong>If you still face issues</strong>, make sure your file permissions are not blocking access. Run:
  </p>

  <pre style="background-color: #fdf6e3; padding: 0.75rem 1rem; border-radius: 6px; overflow-x: auto;">
sudo chmod 755 /home/vboxuser   # Replace with your actual username
sudo chmod -R o+rx /home/frappe-dev
  </pre>

  <p>This ensures that the ERPNext server has permission to access your assets directory.</p>
</div>
      </div>
    <script src="blog-post.js"></script>
</body>
</html>